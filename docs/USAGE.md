# AutoBee 使用ガイド

## 概要

AutoBeeはForestry養蜂箱の自動化プログラムです。女王の寿命が尽きると自動でプリンセスとドローンを補充し、養蜂を継続します。

## できること

### 養蜂の完全自動化

通常の養蜂では、女王蜂の寿命が尽きるたびに手動でプリンセスとドローンを入れ直す必要があります。AutoBeeを使うと：

- **放置で養蜂が継続** - 女王が死んでも自動で次の世代が始まる
- **産物の自動回収** - 蜂蜜、花粉、プロポリスなどがチェストに溜まる
- **複数台の同時管理** - 1台のPCで複数の養蜂箱を制御

### 具体的な活用例

| 用途 | 説明 |
|---|---|
| 素材の量産 | 蜂蜜、プロポリス、ロイヤルゼリーなどを放置で大量生産 |
| 品種改良 | 同じ組み合わせを繰り返して変異を狙う |
| 資源生成 | Industrial Apiary等で鉱石・素材を自動生成 |

### 手動養蜂との比較

| 項目 | 手動 | AutoBee |
|---|---|---|
| 女王死亡時 | 手動で補充 | 自動で補充 |
| 産物回収 | 手動で取り出し | 自動でチェストへ |
| 複数台管理 | 1台ずつ確認 | 全台を一括管理 |
| 放置 | 不可（女王死亡で停止） | 可能（無限継続） |

## 必要なブロック

| ブロック | 数量 | 役割 |
|---|---|---|
| OpenComputers Computer | 1 | プログラム実行 |
| Adapter | 養蜂箱ごとに1 | 養蜂箱とPCを接続 |
| チェスト | 養蜂箱ごとに1 | アイテム入出力 |
| Forestry Apiary / Alveary | 任意 | 養蜂箱本体 |
| ケーブル | 適宜 | Adapter同士を接続 |

## 配置例

### Apiary 1台の場合

```
      上から見た図                    横から見た図

      [チェスト]                         [チェスト]
          │                                  │
     [Apiary]                           [Apiary]
          │                                  │
     [Adapter]                          [Adapter]
          │                                  │
     [Computer]                         [Computer]
```

**config.lua設定**:
```lua
apiaryChestDirection = "up"  -- Apiaryから見てチェストが上
```

### 複数台の配置

```
[チェスト] [チェスト] [チェスト]
    │          │          │
[Apiary]  [Apiary]  [Apiary]
    │          │          │
[Adapter]─[Adapter]─[Adapter]
                │
           [Computer]
```

Adapterはケーブルで繋げばOK。プログラムが自動で全養蜂箱を検出します。

### Alvearyの配置

Alvearyは3x3x3のマルチブロック。Adapterは**側面**に設置。

```
上から見た図:

    [A][A][A]
    [A][A][A]  ← Alveary本体
    [A][A][A]
        │
   [Adapter]─[Computer]
        │
    [チェスト]  ← 南側
```

**config.lua設定**:
```lua
alvearyChestDirection = "south"  -- Alvearyから見てチェストが南
```

## チェスト内の配置

27スロットチェストの場合:

```
┌─────────────────────────────┐
│ [1] [2] [3] [4] [5] [6] [7] [8] [9] │  ← 産物が溜まる
│[10][11][12][13][14][15][16][17][18] │
│[19][20][21][22][23][24][25][26][27] │
│                          ↑    ↑    │
│                       ドローン プリンセス
│                       予約    予約
└─────────────────────────────┘
```

**事前準備**:
- スロット26にドローンを入れておく
- スロット27にプリンセスを入れておく

## 動作の仕組み

### 処理サイクル（2秒ごと）

#### 1. 出力スロット処理

スロット3〜9を順番にチェック:

| 出力スロットの中身 | 入力スロットの状態 | 動作 |
|---|---|---|
| **プリンセス** | スロット1が空 | → スロット1に移動 |
| **プリンセス** | スロット1が埋まっている | → チェストに排出 |
| **ドローン** | スロット2が空 | → スロット2に移動 |
| **ドローン** | スロット2が埋まっている | → チェストに排出 |
| **その他**（蜂蜜、花粉等） | - | → チェストに排出 |

#### 2. 入力スロット補充

- スロット1が空 → チェストのスロット27からプリンセスを取得
- スロット2が空 → チェストのスロット26からドローンを取得

### 養蜂サイクル

```
1. 女王が寿命を迎える
   └→ 出力スロットにプリンセス+ドローンが出現

2. 出力処理実行
   └→ プリンセス → スロット1へ
   └→ ドローン → スロット2へ
   └→ 副産物 → チェストへ

3. 新しい女王が誕生、養蜂継続
```

## インストール

```
wget https://raw.githubusercontent.com/yuu1111/autobee/master/src/installAutoBee.lua
installAutoBee
```

## 実行

```
/home/autobee/main.lua
```

## 操作キー

| キー | 動作 |
|---|---|
| Ctrl+W | プログラム終了 |
| Ctrl+L | 画面クリア |

## 設定（config.lua）

| 設定項目 | デフォルト | 説明 |
|---|---|---|
| `chestSize` | 27 | 出力チェストのスロット数 |
| `apiaryChestDirection` | "up" | Apiaryから見たチェストの方向 |
| `alvearyChestDirection` | "south" | Alvearyから見たチェストの方向 |
| `delay` | 2 | チェック間隔（秒） |
| `debugPrints` | false | デバッグ出力の有効化 |

## 動作確認チェックリスト

- [ ] AdapterがApiaryに隣接している
- [ ] AdapterとComputerがケーブルで接続されている
- [ ] チェストが正しい方向に設置されている
- [ ] チェストのスロット26にドローン、27にプリンセスがある
- [ ] `config.lua`の方向設定が実際の配置と一致している
